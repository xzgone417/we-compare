"use strict";(self.webpackChunkannual_meeting_program=self.webpackChunkannual_meeting_program||[]).push([[26],{26:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(43);const s=JSON.parse('{"q1":{"id":1,"title":"\u6c99\u5a01\u739b\u4f20\u5947\u4e2d\u7684\u6c99\u5a01\u739b\u662f\u6307\u4ec0\u4e48\uff1f","options":[{"name":"\u5317\u4eac\u70e4\u9e2d","idx":"A"},{"name":"\u571f\u8033\u5176\u70e4\u8089\u5377\u997c","idx":"B"},{"name":"\u6c99\u742a\u739b","idx":"C"}]},"q2":{"id":2,"title":"\u300a\u9ed1\u795e\u8bdd\u609f\u7a7a\u300b\u5728\u5982\u4e0b\u54ea\u4e2a\u6e38\u620f\u884c\u4e1a\u5956\u9879\u8bc4\u6bd4\u4e2d\u83b7\u5f97\\"2024\u6700\u4f73\u6e38\u620f\\"","options":[{"name":"\u91d1\u6447\u6746\u5956","idx":"A"},{"name":"TGA","idx":"B"},{"name":"D.I.C.E Awards","idx":"C"}]},"q3":{"id":3,"title":"\u8fd1\u671f\u4e0a\u6d77\u6700\u70ed\u95e8\u7684\u5c71\u5cf0\uff0c\u5f15\u8d77\u4e00\u4f17\u767b\u5c71\u7231\u597d\u8005\u70ed\u60c5\u7684\u5c71\u5cf0\u53cc\u5b50\u5c71\u7684\u6d77\u62d4\uff0c\u4ee5\u4e0b\u54ea\u4e2a\u662f\u9519\u8bef\u7b54\u6848\uff1f","options":[{"name":"4800cm","idx":"A"},{"name":"4800m","idx":"B"},{"name":"48m","idx":"C"}]},"q4":{"id":4,"title":"\u4e0a\u6d77\u8bdd\u3010\u6765\u567b\u3011\u662f\u4ec0\u4e48\u610f\u601d","options":[{"name":"\u8fc7\u6765","idx":"A"},{"name":"\u6765\u5403\u996d","idx":"B"},{"name":"\u80fd\u5e72\u3001\u80fd\u641e\u5b9a","idx":"C"}]},"q5":{"id":5,"title":"\u56fd\u52a1\u9662\u529e\u516c\u5385\u516c\u5e032025\u5e74\u6cd5\u5b9a\u8282\u5047\u65e5\u589e\u52a02\u5929\uff0c25\u5e74\u6cd5\u5b9a\u8282\u5047\u65e5\u653e\u5047\u5929\u6570\u5408\u8ba1","options":[{"name":"12\u5929","idx":"A"},{"name":"13\u5929","idx":"B"},{"name":"14\u5929","idx":"C"}]},"q6":{"id":6,"title":"\u7279\u6717\u666e\u65b0\u8bbe\u7acb\u7684\u5e76\u7531\u9a6c\u65af\u514b\u4e0a\u4efb\u9886\u5bfc\u7684\u653f\u5e9c\u90e8\u95e8\u7f29\u5199\u662f\uff1f","options":[{"name":"DABE","idx":"A"},{"name":"DOME","idx":"B"},{"name":"DOGE","idx":"C"}]},"q7":{"id":7,"title":"2024\u5e74NBA\u603b\u51a0\u519b\u662f","options":[{"name":"\u6e56\u4eba","idx":"A"},{"name":"76\u4eba","idx":"B"},{"name":"\u51ef\u5c14\u7279\u4eba","idx":"C"}]},"q8":{"id":8,"title":"\u5df4\u9ece\u5965\u8fd0\u4f1a\u7f51\u7403\u5973\u5355\u51a0\u519b\u90d1\u94a6\u6587\u662f\u54ea\u91cc\u4eba","options":[{"name":"\u6e56\u5357","idx":"A"},{"name":"\u6cb3\u5317","idx":"B"},{"name":"\u6e56\u5317","idx":"C"}]},"q9":{"id":9,"title":"\u8fd9\u9996\u6b4c\u7684\u6b4c\u540d\u662f\uff1f","options":[{"name":"A.P.T","idx":"A"},{"name":"Need you now","idx":"B"},{"name":"\u563b\u5530\u5530","idx":"C"}]},"q10":{"id":10,"title":"\u300a\u73ab\u7470\u7684\u6545\u4e8b\u300b\u7247\u6bb5\u4e2d\u65b9\u534f\u6587\u5bf9\u73ab\u7470\u8bf4\u7684\u201c\u90a3\u4f60\u504f\u8981\u53bbxxx\u4ec0\u4e48\u610f\u601d\uff0cxx\u5230\u5e95\u6709\u8c01\u5728\u554a\uff1f\u201d\u4e2d\u88ab\u54d4\u6389\u7684\u57ce\u5e02\u662f\u54ea\u91cc\uff1f","options":[{"name":"\u5317\u4eac","idx":"A"},{"name":"\u4e0a\u6d77","idx":"B"},{"name":"\u6df1\u5733","idx":"C"}]},"q11":{"id":11,"title":"\u7814\u7a76\u8868\u793a\u6bcf\u5929\u5230\u6237\u5916\u6216\u8005\u516c\u56ed\u5f85\u4e0a20\u5206\u949f\u80fd\u591f\u8ba9\u4eba\u66f4\u52a0\u5feb\u4e50\uff0c\u8fd9\u4e2a\u6548\u5e94\u88ab\u79f0\u4e4b\u4e3a\u4ec0\u4e48\uff1f","options":[{"name":"\u516c\u56ed20\u5206\u949f\u6548\u5e94","idx":"A"},{"name":"\u5feb\u4e50\u6548\u5e94","idx":"B"},{"name":"\u516c\u56ed\u6548\u5e94","idx":"C"}]},"q12":{"id":12,"title":"\u88ab\u574a\u95f4\u79f0\u4e3a\u201c\u91d1\u878d\u884c\u4e1a\u7684\u8fdb\u4fee\u9662\u201d\u662f\u4ee5\u4e0b\u54ea\u4e2a\u5730\u65b9\uff1f","options":[{"name":"\u63d0\u7bee\u6865","idx":"A"},{"name":"\u4e0a\u6d77\u8d22\u7ecf\u5927\u5b66","idx":"B"},{"name":"\u590d\u65e6\u5927\u5b66","idx":"C"}]},"q13":{"id":13,"title":"TGA2024\u5e74\u5ea6\u6e38\u620f","options":[{"name":"\u5b87\u5b99\u673a\u5668\u4eba","idx":"A"},{"name":"\u9ed1\u795e\u8bdd\u609f\u7a7a","idx":"B"},{"name":"\u827e\u5c14\u767b\u6cd5\u73af \u9ec4\u91d1\u6811\u5e7d\u5f71","idx":"C"}]}}');var i=a(216);const o="http://timish.woa.com",r=async(e,t,a)=>{const n={domain:o,url:"",...e};let s={"Content-Type":"application/json",...e.headers};try{const e=await fetch(n.domain+n.url,{method:"POST",headers:s,cache:"no-store",signal:n.signal,body:JSON.stringify(t)});if(!e.ok)throw new Error("Network response was not ok");const a=await e.text();try{return JSON.parse(a)}catch(i){return a}}catch(r){}finally{null!==a&&void 0!==a&&a.onFinally&&a.onFinally()}},l=async(e,t,a)=>{const n={domain:o,url:"",...e};let s={...e.headers};try{const e=await fetch(n.domain+n.url+"?"+(e=>{const t=Object.keys(e).sort().reduce(((t,a)=>(t[a]=e[a],t)),{});return Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")})(t),{method:"GET",headers:s,cache:"no-store",signal:n.signal});if(!e.ok)throw new Error("Network response was not ok");const a=await e.text();try{return JSON.parse(a)}catch(i){return a}}catch(r){null!==a&&void 0!==a&&a.onError&&a.onError()}finally{null!==a&&void 0!==a&&a.onFinally&&a.onFinally()}};var c=a(579);const d=e=>{let{totalDuration:t,radius:a}=e;const[s,i]=(0,n.useState)(0),o=10;(0,n.useEffect)((()=>{let e;return s<t?e=setInterval((()=>{i((e=>e+.1))}),100):clearInterval(e),()=>clearInterval(e)}),[s,t]);const r=s/t*100,l=2*Math.PI*a,d=l-r/100*l;return(0,c.jsxs)("div",{className:"circular-progress-container",children:[(0,c.jsxs)("svg",{className:"circular-progress-svg",width:2*a+o,height:2*a+o,viewBox:`0 0 ${2*a+o} ${2*a+o}`,children:[(0,c.jsx)("circle",{cx:a+5,cy:a+5,r:a,fill:"none",strokeWidth:o,stroke:r>=80?"#fb4a3e":"#ffd843"}),(0,c.jsx)("circle",{cx:a+5,cy:a+5,r:a,fill:"none",strokeWidth:o,stroke:"#d6e1f5",strokeDasharray:l,strokeDashoffset:d,transform:`rotate(-90 ${a+5} ${a+5})`,style:{transition:"stroke-dashoffset 0.1s linear"}})]}),(0,c.jsxs)("div",{className:"timer",children:[(0,c.jsx)("div",{className:"timer-text",children:"\u5012\u8ba1\u65f6"}),(0,c.jsx)("div",{className:"timer-number",children:Math.ceil(t-s)})]})]})};var m=a(411),u=a(950);const x=e=>{let{isOpen:t,onClose:a,message:s}=e;if((0,n.useEffect)((()=>{document.body.style.overflow=t?"hidden":"auto"}),[t]),!t)return null;return u.createPortal((0,c.jsx)("div",{className:"modal-backdrop",onClick:()=>{a()},children:(0,c.jsx)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("p",{children:s}),(0,c.jsx)("button",{onClick:a,children:"\u786e\u8ba4"})]})})}),document.body)},h=s,p=e=>{const{questionId:t}=(0,i.g)(),a=(0,i.Zp)(),s=(0,i.zy)(),[o,u]=(0,n.useState)([]),[p,v]=(0,n.useState)(""),[g,f]=(0,n.useState)(0),[y,N]=(0,n.useState)(0),[j,w]=(0,n.useState)(0),[b,C]=(0,n.useState)(0),[k,A]=(0,n.useState)(!1),[q,E]=(0,n.useState)("");return(0,n.useEffect)((()=>{for(const e in h)if(Object.prototype.hasOwnProperty.call(h,e)){const a=h[e];null!==t&&void 0!==t&&t.includes(a.id)&&(u(a.options),v(a.title),f(a.id))}}),[t]),(0,n.useEffect)((()=>{let e=new URLSearchParams(s.search).get("code")||"";e&&""!==e||(e=localStorage.getItem(e)+""),E(e),e&&localStorage.setItem("codeFromQuery",e)}),[s.search]),(0,n.useEffect)((()=>{const e=new AbortController,{signal:t}=e;let a=null;return g>0&&(a=setInterval((()=>{(async()=>{const e=await l({headers:{headerJsonMap:q},url:"/get/time",signal:t},{questionID:g},{onError:()=>{}});e>0&&(w(e),N(e),clearInterval(a),a=null)})()}),1e3)),()=>{e.abort(),a&&clearInterval(a)}}),[q,g]),(0,n.useEffect)((()=>{if(y>0){const e=new AbortController,t=setTimeout((()=>{clearInterval(n),a("/result",{state:{resultParam:"\u60a8\u5df2\u653e\u5f03\u4f5c\u7b54\uff01"}})}),1e3*y),n=setInterval((()=>{w((e=>e<=0?(clearInterval(n),0):e-1))}),1e3);return()=>{clearTimeout(t),clearInterval(n),e.abort()}}}),[a,y]),(0,n.useEffect)((()=>{const e=new AbortController,{signal:t}=e;g>0&&y>0&&(async()=>{const e=new URLSearchParams(s.search).get("userName")||"",a=await l({headers:{headerJsonMap:q},url:"/get/option",signal:t},{questionID:g,userName:e},{onError:()=>{}});a>0&&C(a)})()}),[q,y,s.search,g]),(0,c.jsxs)("main",{className:"party-main",children:[y>0&&(0,c.jsxs)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"party-bg",children:[(0,c.jsx)("div",{className:"top-bg"}),(0,c.jsxs)("div",{className:"question-body",children:[(0,c.jsx)("div",{className:"countdown-container",children:(0,c.jsx)(d,{totalDuration:y,radius:50})}),(0,c.jsxs)("section",{className:"question-section",children:[(0,c.jsxs)("p",{className:"question-tag",children:["\u95ee\u9898",g]}),(0,c.jsx)("p",{className:"question-title",children:p})]}),(0,c.jsx)("section",{className:"option-section",children:o.map(((e,t)=>(0,c.jsxs)("div",{className:b===t+1?"option-button selected":"option-button",onClick:()=>{(async e=>{C(e)})(t+1)},children:[(0,c.jsx)("div",{className:"option-idx",children:null===e||void 0===e?void 0:e.idx}),(0,c.jsx)("span",{className:"option-name",children:null===e||void 0===e?void 0:e.name})]},JSON.stringify(e))))})]}),(0,c.jsx)("div",{className:"submit-button-container",children:(0,c.jsx)("button",{className:b>0?"submit-button selected":"submit-button",onClick:async e=>{if(!b||b<=0)return void A(!0);const t=new URLSearchParams(s.search).get("userName")||"1",n=await r({headers:{headerJsonMap:q},url:`/choose?userName=${t}`,signal:e.signal},{questionID:g,option:b},{onError:()=>{}});console.log("\ud83d\ude80XZG ~ postOption ~ res:",n),a("/result",{state:{resultParam:"\u7b54\u9898\u5b8c\u6210\uff01"}})},children:"\u63d0\u4ea4"})})]}),y<=0&&(0,c.jsxs)("div",{className:"wait-bg",children:[(0,c.jsx)("div",{className:"party-center",children:(0,c.jsx)("div",{onClick:async e=>{await r({headers:{headerJsonMap:q},url:"/begin",signal:e.signal},g,{onError:()=>{console.log("begin-error")}})},children:"\u7b49\u5f85\u4f5c\u7b54"})}),(0,c.jsx)("p",{className:"wait-text",children:"\u8bf7\u7b49\u5f85\u626b\u63cf\u4e0b\u4e00\u9898"})]}),k&&(0,c.jsx)(x,{isOpen:k,onClose:()=>{A(!1)},message:"\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u9009\u9879\uff01"})]})}}}]);
//# sourceMappingURL=26.1c1309e0.chunk.js.map